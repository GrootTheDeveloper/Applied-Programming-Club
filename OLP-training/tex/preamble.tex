% ===== Tiếng Việt (phải đứng TRƯỚC biblatex) =====
\usepackage[utf8]{inputenc}
\usepackage[T5]{fontenc}
\usepackage{vietnam} 

% ===== BibLaTeX (biber) =====
\usepackage[backend=biber,natbib=true,style=alphabetic,maxbibnames=50]{biblatex}
\addbibresource{refs/references.bib}

% ===== Bảng/ màu/ bố cục cơ bản =====
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{multicol}
\usepackage[table]{xcolor}
\usepackage{colortbl}
\usepackage{textcase}
\usepackage{wrapfig}
\usepackage{enumitem}
\setlength{\columnseprule}{0.1pt}
\setlength{\parindent}{20pt}
\setlength{\parskip}{1mm}

\def\labelitemii{$\circ$}
\setlist[itemize]{leftmargin=*}
\setlist[enumerate]{leftmargin=*}

\usepackage{listings}
\lstset{
  language=C++,
  basicstyle=\ttfamily\footnotesize,
  keywordstyle=\color{blue},
  commentstyle=\color{gray},
  stringstyle=\color{red},
  numbers=left,
  numberstyle=\tiny\color{gray},
  stepnumber=1,
  breaklines=true,
  frame=single
}

% ===== ToC & mini-ToC =====
\usepackage{tocloft}
\renewcommand{\cftsecleader}{\cftdotfill{\cftdotsep}}
\usepackage{titlesec}        
\usepackage[hidelinks]{hyperref}
\usepackage{minitoc}        
\dominitoc
\setcounter{tocdepth}{2}
\setcounter{secnumdepth}{3}

% ===== Toán & hình =====
\usepackage{amsmath,amssymb,amsthm,mathtools}
\allowdisplaybreaks
\usepackage{graphicx}
\usepackage{float}
\usepackage{tikz}
\usetikzlibrary{
  arrows.meta,positioning,bending,
  angles,calc,intersections,matrix,patterns,quotes,shadings
}

% ===== Lề =====
%\usepackage[left=1cm,right=1cm,top=5mm,bottom=5mm,footskip=4mm]{geometry}
\usepackage[left=2cm,right=2cm,top=2cm,bottom=2cm,footskip=1cm]{geometry}

\makeatletter
\def\@makechapterhead#1{%
  \clearpage
  \vspace*{12pt}
  {\parindent \z@ \centering\normalfont
    \ifnum \c@secnumdepth >\m@ne
      \if@mainmatter
        \LARGE\bfseries \MakeTextUppercase{\@chapapp}\space \thechapter
        \par\nobreak
        \vskip 8pt
      \fi
    \fi
    \interlinepenalty\@M
    \LARGE \bfseries \MakeTextUppercase{#1}\par\nobreak
    \vskip 12pt
  }}
\def\@makeschapterhead#1{%
  \clearpage
  \vspace*{12pt}
  {\parindent \z@ \centering\normalfont
    \interlinepenalty\@M
    \LARGE \bfseries \MakeTextUppercase{#1}\par\nobreak
    \vskip 12pt
  }}
\makeatother


% ===== Sửa trùng anchor hình (hyperref warnings figure.2.1, …) =====
\makeatletter
\renewcommand*{\theHfigure}{\thechapter.\arabic{figure}}
\makeatother

\makeatletter
\def\@makechapterhead#1{%
  \clearpage
  \vspace*{50\p@}
  {\parindent \z@ \centering\normalfont
    \ifnum \c@secnumdepth >\m@ne
      \if@mainmatter
        \huge\bfseries \MakeTextUppercase{\@chapapp}\space \thechapter
        \par\nobreak
        \vskip 20\p@
      \fi
    \fi
    \interlinepenalty\@M
    \huge \bfseries \MakeTextUppercase{#1}\par\nobreak
    \vskip 40\p@
  }}
\def\@makeschapterhead#1{%
  \clearpage
  \vspace*{50\p@}
  {\parindent \z@ \centering\normalfont
    \interlinepenalty\@M
    \huge \bfseries \MakeTextUppercase{#1}\par\nobreak
    \vskip 40\p@
  }}
\makeatother


\newcounter{baitapctr}
\newenvironment{baitap}[2]{%
  \refstepcounter{baitapctr}%
  \par\noindent\textbf{Bài tập \thebaitapctr. #1}%
  \hfill\textbf{link: }\href{#2}{#2}%
  \par\noindent
}{\par}

\newenvironment{huonggiai}{%
  \par\noindent\textbf{Hướng giải.}%
  \begin{itemize}
}{%
  \end{itemize}\par
}

\usepackage{array}

\newenvironment{example}{%
%  \par\noindent\textbf{Ví dụ:}\par % in đậm và xuống dòng
  \par
  \vspace{2pt}
  \centering 
  \begin{tabular}{|p{0.2\linewidth}|p{0.20\linewidth}|>{\centering\arraybackslash}p{0.5\linewidth}|}
  \hline
  \textbf{\texttt{Dữ liệu vào}} & \textbf{\texttt{Kết quả ra}} & \textbf{\texttt{Giải thích}} \\
  \hline
}{
  \hline
  \end{tabular}
  \par\vspace{6pt}
}

\newenvironment{simple_example}{%
%  \par\noindent\textbf{Ví dụ:}\par % in đậm và xuống dòng
  \par
  \vspace{2pt}
  \centering 
  \begin{tabular}{|p{0.45\linewidth}|p{0.45\linewidth}|}
  \hline
  \textbf{\texttt{Dữ liệu vào}} & \textbf{\texttt{Kết quả ra}} \\
  \hline
}{
  \hline
  \end{tabular}
  \par\vspace{6pt}
}